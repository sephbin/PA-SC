<!DOCTYPE html>
<html>
<head>
  <title>MAP</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>
   <style type="text/css">
  #mapid { position:absolute;
    top:0px;
    bottom: 0px;
    left: 0px;
    right: 0px; }
    .leaflet-container {
    background-color:rgba(0,0,0,1);
}
</style>
</head>
<body>
<div id="mapid"></div>
</body>
<script type="text/javascript">
  var mymap = L.map('mapid', {crs: L.CRS.Simple,
    // minZoom: -5 // CRS SIMPLE
     }).setView([-100, 100],5);
  L.tileLayer('/media/tiles/golarion/{z}/{y}/{x}.png', {
    maxZoom: 5,
    minZoom: 1,
    accessToken: 'your.mapbox.access.token'
}).addTo(mymap);

var greenIcon = L.icon({
    iconUrl: '/media/icons/cb.svg',
    // shadowUrl: 'leaf-shadow.png',

    iconSize:     [38, 38], // size of the icon
    // shadowSize:   [50, 64], // size of the shadow
    iconAnchor:   [19, 19], // point of the icon which will correspond to marker's location
    // shadowAnchor: [4, 62],  // the same for the shadow
    // popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
});
{% for p in polygons %}
var polygon = L.polygon(
  [{% for c in p.coords %}[{{c.1}},{{c.0}}],{% endfor %}],
  {color: '{{p.color}}', stroke: false, fillOpacity: {{p.fillOpacity}}}).addTo(mymap);
{% endfor %}

var sol = L.latLng([ -120, 120 ]);
L.marker(sol, {icon: greenIcon}).addTo(mymap).bindPopup(      'Sol');

var imageUrl = '/media/icons/fm.svg',
    imageBounds = [[-100, 100], [-50, 250]];
L.imageOverlay(imageUrl, imageBounds).addTo(mymap);


mymap.addEventListener('mousemove', function(ev) {
   lat = ev.latlng.lat;
   lng = ev.latlng.lng;
});
document.getElementById("mapid").addEventListener("contextmenu", function (event) {
    // Prevent the browser's context menu from appearing
    event.preventDefault();

    // Add marker
    // L.marker([lat, lng], ....).addTo(map);
    alert(lng + ', ' + lat);

    return false; // To disable default popup.
});

var shelter1 = L.marker([-100, 100], {icon: greenIcon});

var shelterMarkers = new L.FeatureGroup();

shelterMarkers.addLayer(shelter1);

mymap.on('zoomend', function() {
    if (mymap.getZoom() <3){
            mymap.removeLayer(shelterMarkers);
    }
    else {
            mymap.addLayer(shelterMarkers);
        }
});
</script>
</html>